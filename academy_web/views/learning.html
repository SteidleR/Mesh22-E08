<!doctype html>
<html lang="en">
<head>
    <title>Learning</title>

    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/profile.css">
    <link rel="stylesheet" href="/css/learning.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://kit.fontawesome.com/5f2a2ad0fd.js" crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>


<div class="top-banner"><b>Learn to think like a Problemsolver</b>
    <a class="profile" href="/profile"><img src="/profile/image" alt="Profile"></a>
</div>

<div id="main">
    <div id="learning_topic_container">
        <img src="/learning/<%= id %>/icon" alt="ICON" style="width: 5.5rem; display: inline-block;"/>
        <div style="display: inline-block;" >
            <h4 id="topic"></h4>
            <h6 id="topic-path"></h6>
        </div>
    </div>
    <div class="main" id="container-content">
        <h1 id="topic-title"></h1>
    </div>
</div>

<script src="/js/watson-assistant.js"></script>

<script>
    let learning_id = "<%= id %>";
    let learning_content = JSON.parse(`<%- data %>`);

    document.title = learning_content.topic;
    document.getElementById("topic-title").innerText = learning_content.title;

    let content_div = document.getElementById("container-content");

    for (let i = 0; i < learning_content.content.length; i++) {
        let c = learning_content.content[i];
        if (c.type === "text") {
            content_div.innerHTML += "<p>" + c.value + "</p>";
        } else if (c.type === "image") {
            content_div.innerHTML += "<img src='/learning/" + learning_id + "/content/" + c.src + "' />";
        }
    }

    document.getElementById("topic").innerText = learning_content.topic;
    document.getElementById("topic-path").innerText = learning_content.path + " Part " + learning_content.part;
</script>
</body>
</html>